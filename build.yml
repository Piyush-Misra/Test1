# ASP.NET Core (.NET Framework)
# Build and test ASP.NET Core projects targeting the full .NET Framework.
# Add steps that publish symbols, save build artifacts, and more:
# https://docs.microsoft.com/azure/devops/pipelines/languages/dotnet-core

trigger:
   branches:
    include:
    - 
   paths:
    include:
    - /dev_Test1

pool:
  vmImage: 'windows-latest'

variables:
  publishArtifact: in(variables['Build.SourceBranchName'], 'dev_Test1')
  # This is the Azure connection that is specific for the environment. Some tasks to not have subscription Ids :/
  target-resource-group: 'rg-moderndw-poc-auseast'
  # This is the Azure connection that has access to all environments. Some tasks to have subscription Ids :)
  azure-resource-manager-connection: 'AzureDevOps-Water Data' # This is the connection for all subscriptions????????????????????????
  #product-name: 'waterdata-dev-df-123'
  #environment: 'dev'
steps:

# Copy our infrastructure files into ArtifactStagingDirectory
- task: CopyFiles@2
  displayName: 'Copy infrastructure files to Artifact Staging Directoryyyyyyyyy'
  condition: and(succeeded(), variables['publishArtifact'])
  inputs:
    SourceFolder: '$(Build.Repository.LocalPath)\dev_Test1\'
    Contents: '**'
    TargetFolder: '$(Build.ArtifactStagingDirectory)\dev_Test1\'

# Upload $(Build.ArtifactStagingDirectory) as a build artifact
- task: PublishBuildArtifacts@1
  displayName: Publish Build Artifacts
  condition: and(succeeded(), variables['publishArtifact'])
  inputs:
    pathtoPublish: '$(Build.ArtifactStagingDirectory)'
    artifactName: 'artifact'
